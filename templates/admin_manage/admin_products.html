{% extends './baseadmin/base_panel.html' %}
{% block title_panel %}
<title>Admin Products Page</title>
{% endblock %}
{% block main_panel %}
<div class="right_panel_title right_panel_title_add">
    <p class="product_text">Продукты</p>
    <div class="add_product">
        <a href="?add_product={{category3_id}}">
            <div class="cart_img">
                <svg  viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.9998 16.6251C14.8373 16.6251 14.6748 16.5876 14.5248 16.5001L3.48731 10.1126C3.03731 9.85012 2.88729 9.27508 3.14979 8.82508C3.41229 8.37508 3.97479 8.22506 4.43729 8.48756L14.9998 14.6001L25.4998 8.5251C25.9498 8.2626 26.5248 8.42512 26.7873 8.86262C27.0498 9.31262 26.8873 9.88758 26.4498 10.1501L15.4873 16.5001C15.3248 16.5751 15.1623 16.6251 14.9998 16.6251Z" fill="white"/>
                <path d="M15 27.9501C14.4875 27.9501 14.0625 27.5251 14.0625 27.0126V15.675C14.0625 15.1625 14.4875 14.7375 15 14.7375C15.5125 14.7375 15.9375 15.1625 15.9375 15.675V27.0126C15.9375 27.5251 15.5125 27.9501 15 27.9501Z" fill="white"/>
                <path d="M15.0002 28.4375C13.9002 28.4375 12.8126 28.2 11.9501 27.725L5.27515 24.0125C3.46265 23.0125 2.05017 20.6 2.05017 18.525V11.4625C2.05017 9.38747 3.46265 6.98753 5.27515 5.97503L11.9501 2.275C13.6626 1.325 16.3377 1.325 18.0502 2.275L24.7252 5.98746C26.5377 6.98746 27.9501 9.39998 27.9501 11.475V18.5375C27.9501 20.6125 26.5377 23.0125 24.7252 24.025L18.0502 27.725C17.1877 28.2 16.1002 28.4375 15.0002 28.4375ZM15.0002 3.43749C14.2127 3.43749 13.4377 3.6 12.8627 3.9125L6.18767 7.62496C4.98767 8.29996 3.92517 10.0875 3.92517 11.475V18.5375C3.92517 19.9125 4.98767 21.7125 6.18767 22.3875L12.8627 26.1C14.0002 26.7375 16.0001 26.7375 17.1376 26.1L23.8126 22.3875C25.0126 21.7125 26.0751 19.925 26.0751 18.5375V11.475C26.0751 10.1 25.0126 8.29996 23.8126 7.62496L17.1376 3.9125C16.5626 3.6 15.7877 3.43749 15.0002 3.43749Z" fill="white"/>
                <path d="M21.2502 17.4877C20.7377 17.4877 20.3127 17.0627 20.3127 16.5502V12.5252L8.91273 5.95021C8.46273 5.68771 8.31271 5.11268 8.57521 4.67518C8.83771 4.22518 9.40023 4.07516 9.85023 4.33766L21.7127 11.1877C22.0002 11.3502 22.1877 11.6627 22.1877 12.0002V16.5752C22.1877 17.0627 21.7627 17.4877 21.2502 17.4877Z" fill="white"/>
                </svg>
            </div>
            <div class="cart_text">
                <p>Добавить продукт</p>
            </div>
        </a>
    </div>
</div>
<div class="menu_carts_block">
    <div class="menu_cart">
        <a href="/manage/product/1/">
            <div class="cart_img">
                <svg  viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.9998 16.6251C14.8373 16.6251 14.6748 16.5876 14.5248 16.5001L3.48731 10.1126C3.03731 9.85012 2.88729 9.27508 3.14979 8.82508C3.41229 8.37508 3.97479 8.22506 4.43729 8.48756L14.9998 14.6001L25.4998 8.5251C25.9498 8.2626 26.5248 8.42512 26.7873 8.86262C27.0498 9.31262 26.8873 9.88758 26.4498 10.1501L15.4873 16.5001C15.3248 16.5751 15.1623 16.6251 14.9998 16.6251Z" fill="white"/>
                <path d="M15 27.9501C14.4875 27.9501 14.0625 27.5251 14.0625 27.0126V15.675C14.0625 15.1625 14.4875 14.7375 15 14.7375C15.5125 14.7375 15.9375 15.1625 15.9375 15.675V27.0126C15.9375 27.5251 15.5125 27.9501 15 27.9501Z" fill="white"/>
                <path d="M15.0002 28.4375C13.9002 28.4375 12.8126 28.2 11.9501 27.725L5.27515 24.0125C3.46265 23.0125 2.05017 20.6 2.05017 18.525V11.4625C2.05017 9.38747 3.46265 6.98753 5.27515 5.97503L11.9501 2.275C13.6626 1.325 16.3377 1.325 18.0502 2.275L24.7252 5.98746C26.5377 6.98746 27.9501 9.39998 27.9501 11.475V18.5375C27.9501 20.6125 26.5377 23.0125 24.7252 24.025L18.0502 27.725C17.1877 28.2 16.1002 28.4375 15.0002 28.4375ZM15.0002 3.43749C14.2127 3.43749 13.4377 3.6 12.8627 3.9125L6.18767 7.62496C4.98767 8.29996 3.92517 10.0875 3.92517 11.475V18.5375C3.92517 19.9125 4.98767 21.7125 6.18767 22.3875L12.8627 26.1C14.0002 26.7375 16.0001 26.7375 17.1376 26.1L23.8126 22.3875C25.0126 21.7125 26.0751 19.925 26.0751 18.5375V11.475C26.0751 10.1 25.0126 8.29996 23.8126 7.62496L17.1376 3.9125C16.5626 3.6 15.7877 3.43749 15.0002 3.43749Z" fill="white"/>
                <path d="M21.2502 17.4877C20.7377 17.4877 20.3127 17.0627 20.3127 16.5502V12.5252L8.91273 5.95021C8.46273 5.68771 8.31271 5.11268 8.57521 4.67518C8.83771 4.22518 9.40023 4.07516 9.85023 4.33766L21.7127 11.1877C22.0002 11.3502 22.1877 11.6627 22.1877 12.0002V16.5752C22.1877 17.0627 21.7627 17.4877 21.2502 17.4877Z" fill="white"/>
                </svg>
            </div>
            <div class="cart_text">
                <p>Отопления</p>
            </div>
        </a>
    </div>
    <div class="menu_cart">
        <a href="/manage/product/2/">
            <div class="cart_img">
                <svg viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.75 28.4375H11.25C4.4625 28.4375 1.5625 25.5375 1.5625 18.75V11.25C1.5625 4.4625 4.4625 1.5625 11.25 1.5625H18.75C25.5375 1.5625 28.4375 4.4625 28.4375 11.25V18.75C28.4375 25.5375 25.5375 28.4375 18.75 28.4375ZM11.25 3.4375C5.4875 3.4375 3.4375 5.4875 3.4375 11.25V18.75C3.4375 24.5125 5.4875 26.5625 11.25 26.5625H18.75C24.5125 26.5625 26.5625 24.5125 26.5625 18.75V11.25C26.5625 5.4875 24.5125 3.4375 18.75 3.4375H11.25Z" fill="white"/>
                <path d="M11.25 13.4375C9.35 13.4375 7.8125 11.9 7.8125 10C7.8125 8.1 9.35 6.5625 11.25 6.5625C13.15 6.5625 14.6875 8.1 14.6875 10C14.6875 11.9 13.15 13.4375 11.25 13.4375ZM11.25 8.4375C10.3875 8.4375 9.6875 9.1375 9.6875 10C9.6875 10.8625 10.3875 11.5625 11.25 11.5625C12.1125 11.5625 12.8125 10.8625 12.8125 10C12.8125 9.1375 12.1125 8.4375 11.25 8.4375Z" fill="white"/>
                <path d="M3.3375 24.625C3.0375 24.625 2.7375 24.475 2.5625 24.2125C2.275 23.7875 2.3875 23.2 2.825 22.9125L8.9875 18.775C10.3375 17.8625 12.2 17.975 13.425 19.0125L13.8375 19.375C14.4625 19.9125 15.525 19.9125 16.1375 19.375L21.3375 14.9125C22.6625 13.775 24.75 13.775 26.0875 14.9125L28.125 16.6625C28.5125 17 28.5625 17.5875 28.225 17.9875C27.8875 18.375 27.3 18.425 26.9 18.0875L24.8625 16.3375C24.2375 15.8 23.175 15.8 22.55 16.3375L17.35 20.8C16.025 21.9375 13.9375 21.9375 12.6 20.8L12.1875 20.4375C11.6125 19.95 10.6625 19.9 10.025 20.3375L3.8625 24.475C3.7 24.575 3.5125 24.625 3.3375 24.625Z" fill="white"/>
                </svg>
            </div>
            <div class="cart_text">
                <p>Канализация</p>
            </div>
        </a>
    </div>
    <div class="menu_cart">
        <a href="/manage/product/3/">
            <div class="cart_img">
                <svg  viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.8825 26.5475C18.5325 26.5475 18.2 26.4075 17.955 26.1625L13.72 21.9275C13.2125 21.42 13.2125 20.58 13.72 20.0725C14.2275 19.565 15.0675 19.565 15.575 20.0725L18.8825 23.38L26.4075 15.855C26.915 15.3475 27.755 15.3475 28.2625 15.855C28.77 16.3625 28.77 17.2025 28.2625 17.71L19.81 26.1625C19.565 26.4075 19.2325 26.5475 18.8825 26.5475Z" fill="white"/>
                <path d="M21 39.8125C19.8975 39.8125 18.795 39.445 17.9375 38.71L15.1725 36.33C14.8925 36.085 14.1925 35.84 13.825 35.84H10.815C8.22504 35.84 6.12504 33.74 6.12504 31.15V28.1575C6.12504 27.79 5.88004 27.1075 5.63504 26.8275L3.27254 24.045C1.83754 22.3475 1.83754 19.67 3.27254 17.9725L5.63504 15.19C5.88004 14.91 6.12504 14.2275 6.12504 13.86V10.85C6.12504 8.26 8.22504 6.16 10.815 6.16H13.8425C14.21 6.16 14.91 5.8975 15.19 5.67L17.955 3.29C19.67 1.82 22.3475 1.82 24.0625 3.29L26.8275 5.67C27.1075 5.915 27.8075 6.16 28.175 6.16H31.15C33.74 6.16 35.84 8.26 35.84 10.85V13.825C35.84 14.1925 36.1025 14.8925 36.3475 15.1725L38.7275 17.9375C40.1975 19.6525 40.1975 22.33 38.7275 24.045L36.3475 26.81C36.1025 27.09 35.84 27.79 35.84 28.1575V31.1325C35.84 33.7225 33.74 35.8225 31.15 35.8225H28.175C27.8075 35.8225 27.1075 36.085 26.8275 36.3125L24.0625 38.6925C23.205 39.445 22.1025 39.8125 21 39.8125ZM10.815 8.785C9.67754 8.785 8.75004 9.7125 8.75004 10.85V13.8425C8.75004 14.84 8.27754 16.1175 7.63004 16.87L5.26754 19.6525C4.65504 20.37 4.65504 21.6125 5.26754 22.33L7.63004 25.1125C8.27754 25.8825 8.75004 27.1425 8.75004 28.14V31.1325C8.75004 32.27 9.67754 33.1975 10.815 33.1975H13.8425C14.8575 33.1975 16.135 33.67 16.905 34.335L19.67 36.715C20.3875 37.3275 21.6475 37.3275 22.365 36.715L25.13 34.335C25.9 33.6875 27.1775 33.1975 28.1925 33.1975H31.1675C32.305 33.1975 33.2325 32.27 33.2325 31.1325V28.1575C33.2325 27.1425 33.705 25.865 34.37 25.095L36.75 22.33C37.3625 21.6125 37.3625 20.3525 36.75 19.635L34.37 16.87C33.705 16.1 33.2325 14.8225 33.2325 13.8075V10.85C33.2325 9.7125 32.305 8.785 31.1675 8.785H28.1925C27.1775 8.785 25.9 8.3125 25.13 7.6475L22.365 5.2675C21.6475 4.655 20.3875 4.655 19.67 5.2675L16.905 7.665C16.135 8.3125 14.84 8.785 13.8425 8.785H10.815Z" fill="white"/>
                </svg>
            </div>
            <div class="cart_text">
                <p>Оборудования</p>
            </div>
        </a>
    </div>
</div>
<div class="right_panel_table_container">
    <div class="table_title">
        <p>Категория: <a href="/manage/product/{{panel_index_url}}/" class="url_category url_category1"></a> / <a href="/manage/product/{{panel_index_url}}/" class="url_category">{{category3.bind}}</a> / <a href="/manage/product/{{panel_index_url}}/" class="url_category">{{category3.name}}</a></p>
    </div>
    <div class="right_panel_table">
        <table>
            <thead>
                <tr class="right_panel_actions">
                    <th>Название</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody class="table_product_result">
                {% for product in products %}
                <tr class="tr_category">
                    <td class="td_product">
<!--                        <div class="edit_input">-->
<!--                            <input type="text" value="{{product.name}}">-->
<!--                        </div>-->
                        <p class="category_top">
                            <a href="/manage/editproduct/{{product.id}}/">
                                {{product.name}}
                            </a>
                        </p>
                     </td>
                     <td class="td_product_actions">
                         {% if product.show %}
                             <div class="admin_edit admin_show" data-id="{{product.id}}" data-show="true" onclick="show(this)">
                                <span style="background-color:green;"></span>
                             </div>
                         {% else %}
                            <div class="admin_edit admin_show" data-id="{{product.id}}" data-show="false" onclick="show(this)">
                                <span></span>
                            </div>
                         {% endif %}
                         <a href="/manage/editproduct/{{product.id}}/">
                             <div class="admin_edit" >
                                <i class="bi bi-pencil"></i>
                             </div>
                         </a>
                         <div class="admin_delete" onclick="delete_category(this,'pr')" data-delete="{{product.id}}">
                            <i class="bi bi-trash"></i>
                         </div>
                     </td>
                 </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<script>
    document.querySelectorAll(".menu_cart")[{{panel_index}}].querySelector("a").style = "background-color:#ffcc01;";
    document.querySelectorAll(".url_category").forEach((e)=>{
        let text = e.textContent.trim()
        if(text.length >= 30){
            e.textContent = e.textContent.trim().slice(0,30) + "..."
        }
    })
    document.querySelector(".url_category1").innerHTML = document.querySelectorAll(".menu_cart")[{{panel_index}}].querySelector("a").querySelector("p").textContent.trim();
</script>
{% endblock %}